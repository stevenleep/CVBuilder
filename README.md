# LCEdit - ä¼ä¸šçº§ä½ä»£ç /æ— ä»£ç å¹³å°æ¡†æ¶

<div align="center">

**ğŸš€ é«˜æ€§èƒ½ Â· ğŸ¯ ç±»å‹å®‰å…¨ Â· ğŸ”Œ å¯æ‰©å±• Â· ğŸ“¦ æ¨¡å—åŒ–**

[![TypeScript](https://img.shields.io/badge/TypeScript-100%25-blue.svg)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

</div>

---

## ğŸ“– ç›®å½•

- [ç®€ä»‹](#ç®€ä»‹)
- [æ¶æ„å›¾](#æ¶æ„å›¾)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ¶æ„è¯¦è§£](#æ¶æ„è¯¦è§£)
- [æ‰©å±•æŒ‡å—](#æ‰©å±•æŒ‡å—)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)

---

## ğŸ¯ ç®€ä»‹

LCEdit æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„ä½ä»£ç /æ— ä»£ç å¹³å°æ¡†æ¶ï¼Œæä¾›å®Œæ•´çš„ç¼–è¾‘å™¨åº•å±‚èƒ½åŠ›ã€‚å®ƒé‡‡ç”¨**åè®®é©±åŠ¨è®¾è®¡**ï¼Œæ”¯æŒå¤šæ¡†æ¶ã€å¤šå¹³å°ï¼Œå…·æœ‰é«˜åº¦çš„å¯æ‰©å±•æ€§å’Œç±»å‹å®‰å…¨ã€‚

### è®¾è®¡ç†å¿µ

- **åè®®é©±åŠ¨** - æ¸…æ™°çš„æ¥å£å®šä¹‰ï¼Œæ˜“äºç†è§£å’Œå®ç°
- **åˆ†å±‚æ¶æ„** - æ ¸å¿ƒå±‚ã€é€‚é…å±‚ã€UIå±‚åˆ†ç¦»ï¼ŒèŒè´£æ˜ç¡®
- **ç±»å‹å®‰å…¨** - 100% TypeScriptï¼Œå®Œæ•´çš„ç±»å‹æ¨å¯¼
- **å¯æ‰©å±•æ€§** - æ’ä»¶ç³»ç»Ÿã€ä¸­é—´ä»¶ã€äº‹ä»¶ç³»ç»Ÿ
- **æ¡†æ¶æ— å…³** - æ ¸å¿ƒå±‚ç‹¬ç«‹ï¼Œå¯é€‚é…ä»»ä½• UI æ¡†æ¶

---

## ğŸ—ï¸ æ¶æ„å›¾

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         åº”ç”¨å±‚ (Application Layer)                â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  CVBuilder  â”‚  â”‚   è¡¨å•ç¼–è¾‘å™¨  â”‚  â”‚   é¡µé¢ç¼–è¾‘å™¨  â”‚  ...       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI ç»„ä»¶å±‚ (@lcedit/ui)                          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Button  â”‚  â”‚  Panel  â”‚  â”‚ PropertyPanel â”‚  â”‚ Toolbar  â”‚ ...  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   React é€‚é…å±‚ (@lcedit/react)                     â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚    Contexts      â”‚              â”‚       Hooks        â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚        â”‚
â”‚  â”‚  â”‚  Editor    â”‚  â”‚              â”‚  â”‚ useEditor()  â”‚ â”‚        â”‚
â”‚  â”‚  â”‚  Service   â”‚  â”‚              â”‚  â”‚ useHistory() â”‚ â”‚        â”‚
â”‚  â”‚  â”‚  Theme     â”‚  â”‚              â”‚  â”‚ useCommands()â”‚ â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     æ ¸å¿ƒå±‚ (@lcedit/core)                          â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    æ ¸å¿ƒæœåŠ¡ (Services)                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚EventBus  â”‚ â”‚StateManagerâ”‚ â”‚MaterialRegistryâ”‚ â”‚PluginMgrâ”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚CommandSvcâ”‚ â”‚HistorySvcâ”‚ â”‚RendererRegâ”‚ â”‚DIContainerâ”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    åè®®å®šä¹‰ (Protocols)                   â”‚    â”‚
â”‚  â”‚  Material â”‚ Renderer â”‚ Command â”‚ Event â”‚ History â”‚ ...  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                   ç±»å‹ & å·¥å…· (Types & Utils)             â”‚    â”‚
â”‚  â”‚  Validation â”‚ Security â”‚ Serialization â”‚ Constants      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ“ä½œ  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Components  â”‚  (Button, Panel, etc.)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Hooks    â”‚  (useEditor, useHistory, etc.)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Core Services  â”‚  (StateManager, EventBus, etc.)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  State Update   â”‚  (Zustand + Immer)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event Emit     â”‚  (EventBus å‘å¸ƒäº‹ä»¶)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Subscribers    â”‚  (Plugins, Middlewares, etc.)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI Re-render   â”‚  (React é‡æ–°æ¸²æŸ“)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ç±»å‹å®‰å…¨
- 100% TypeScript ç¼–å†™
- å®Œæ•´çš„ç±»å‹æ¨å¯¼å’Œæ£€æŸ¥
- 0 ä¸ª `any` ç±»å‹

### ğŸ”Œ é«˜åº¦å¯æ‰©å±•
- **æ’ä»¶ç³»ç»Ÿ** - è‡ªå®šä¹‰åŠŸèƒ½æ‰©å±•
- **ä¸­é—´ä»¶** - çŠ¶æ€ç®¡ç†æ‹¦æˆª
- **äº‹ä»¶ç³»ç»Ÿ** - å‘å¸ƒè®¢é˜…æ¨¡å¼
- **è‡ªå®šä¹‰ç‰©æ–™** - æ‰©å±•ç»„ä»¶åº“
- **è‡ªå®šä¹‰æ¸²æŸ“å™¨** - å¤šæ¡†æ¶æ”¯æŒ

### ğŸš€ é«˜æ€§èƒ½
- åŸºäº Zustand + Immer çš„çŠ¶æ€ç®¡ç†
- O(1) èŠ‚ç‚¹æŸ¥æ‰¾ï¼ˆnodeMapï¼‰
- å¢é‡æ›´æ–°
- è™šæ‹ŸåŒ–æ”¯æŒ

### ğŸ—ï¸ æ¸…æ™°çš„æ¶æ„
- **åè®®é©±åŠ¨è®¾è®¡** - æ¥å£å…ˆè¡Œ
- **åˆ†å±‚æ¶æ„** - èŒè´£åˆ†ç¦»
- **ä¾èµ–æ³¨å…¥** - æ¾è€¦åˆ
- **äº‹ä»¶é©±åŠ¨** - è§£è€¦åˆ

### ğŸ“¦ æ¨¡å—åŒ–
- Monorepo ç®¡ç†
- æŒ‰éœ€å¯¼å…¥
- ç‹¬ç«‹ç‰ˆæœ¬ç®¡ç†

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# ä½¿ç”¨ pnpm (æ¨è)
pnpm add @lcedit/core @lcedit/react @lcedit/ui

# ä½¿ç”¨ npm
npm install @lcedit/core @lcedit/react @lcedit/ui

# ä½¿ç”¨ yarn
yarn add @lcedit/core @lcedit/react @lcedit/ui
```

### åŸºç¡€ç”¨æ³•

```tsx
import { createCoreServices } from '@lcedit/core'
import { EditorProvider, ServiceProvider, useEditor } from '@lcedit/react'
import { Button, PropertyPanel } from '@lcedit/ui'
import '@lcedit/ui/styles'

// 1. åˆ›å»ºæ ¸å¿ƒæœåŠ¡ï¼ˆä¸€è¡Œæå®šï¼ï¼‰
const services = createCoreServices()

// 2. ç¼–è¾‘å™¨ç»„ä»¶
function MyEditor() {
  const { state, actions } = useEditor()
  
  const addNode = () => {
    actions.addNode({
      id: `node-${Date.now()}`,
      type: 'text',
      props: { text: 'Hello World' },
      position: { x: 100, y: 100 },
      size: { width: 200, height: 40 },
      children: [],
      parentId: null,
      style: {},
      locked: false,
      hidden: false,
      custom: {},
    })
  }
  
  return (
    <div>
      <Button onClick={addNode}>æ·»åŠ èŠ‚ç‚¹</Button>
      <div>èŠ‚ç‚¹æ•°: {Object.keys(state.nodes).length}</div>
      <PropertyPanel />
    </div>
  )
}

// 3. åº”ç”¨å…¥å£
function App() {
  return (
    <ServiceProvider services={services}>
      <EditorProvider stateManager={services.stateManager}>
        <MyEditor />
      </EditorProvider>
    </ServiceProvider>
  )
}
```

### è‡ªå®šä¹‰æœåŠ¡é…ç½®

```tsx
import { 
  createCoreServices,
  createStateManager,
  createEventBus 
} from '@lcedit/core'

// æ–¹å¼ 1: ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆæ¨èï¼‰
const services = createCoreServices()

// æ–¹å¼ 2: è‡ªå®šä¹‰å•ä¸ªæœåŠ¡
const services = createCoreServices({
  stateManager: createStateManager({
    // è‡ªå®šä¹‰é…ç½®
  })
})

// æ–¹å¼ 3: è‡ªå®šä¹‰å¤šä¸ªæœåŠ¡
const customEventBus = createEventBus()
const services = createCoreServices({
  eventBus: customEventBus,
  materialRegistry: createMaterialRegistry({ eventBus: customEventBus })
})

// æ–¹å¼ 4: å®Œå…¨è‡ªå®šä¹‰ï¼ˆé«˜çº§ç”¨æ³•ï¼‰
const services = createCoreServices({
  eventBus: myEventBus,
  stateManager: myStateManager,
  historyService: myHistoryService,
  // ... å…¶ä»–æœåŠ¡
})
```

---

## ğŸ›ï¸ æ¶æ„è¯¦è§£

### æ ¸å¿ƒå±‚ (@lcedit/core)

**èŒè´£**: æä¾›æ¡†æ¶æ— å…³çš„æ ¸å¿ƒèƒ½åŠ›

#### ğŸ”§ æ ¸å¿ƒæœåŠ¡

| æœåŠ¡ | åŠŸèƒ½ | ç‰¹æ€§ |
|------|------|------|
| **EventBus** | äº‹ä»¶æ€»çº¿ | ä¼˜å…ˆçº§ã€æ‹¦æˆªå™¨ã€èŠ‚æµã€é˜²æŠ– |
| **StateManager** | çŠ¶æ€ç®¡ç† | Zustand + Immerï¼ŒO(1)æŸ¥æ‰¾ |
| **HistoryService** | å†å²ç®¡ç† | æ’¤é”€/é‡åšï¼Œå¿«ç…§ï¼Œå¢é‡è®°å½• |
| **CommandService** | å‘½ä»¤ç³»ç»Ÿ | å‘½ä»¤æ³¨å†Œã€æ‰§è¡Œã€å¿«æ·é”® |
| **MaterialRegistry** | ç‰©æ–™æ³¨å†Œè¡¨ | ç‰©æ–™ç®¡ç†ã€æŸ¥è¯¢ã€éªŒè¯ |
| **RendererRegistry** | æ¸²æŸ“å™¨æ³¨å†Œè¡¨ | å¤šæ¡†æ¶ã€å¤šå¹³å°æ¸²æŸ“å™¨ |
| **PluginManager** | æ’ä»¶ç®¡ç†å™¨ | ç”Ÿå‘½å‘¨æœŸã€ä¾èµ–è§£æ |
| **DIContainer** | ä¾èµ–æ³¨å…¥ | å•ä¾‹ã€ç¬æ€ã€ä½œç”¨åŸŸ |

#### ğŸ“‹ åè®®å®šä¹‰

æ‰€æœ‰æ ¸å¿ƒæ¦‚å¿µéƒ½é€šè¿‡åè®®ï¼ˆProtocolï¼‰å®šä¹‰ï¼š

- `MaterialProtocol` - ç‰©æ–™å®šä¹‰è§„èŒƒ
- `RendererProtocol` - æ¸²æŸ“å™¨è§„èŒƒ
- `CommandProtocol` - å‘½ä»¤ç³»ç»Ÿè§„èŒƒ
- `EventProtocol` - äº‹ä»¶ç³»ç»Ÿè§„èŒƒ
- `PluginProtocol` - æ’ä»¶ç³»ç»Ÿè§„èŒƒ
- `HistoryProtocol` - å†å²è®°å½•è§„èŒƒ
- `ServiceProtocol` - æœåŠ¡å®¹å™¨è§„èŒƒ
- `DataProtocol` - æ•°æ®ç»“æ„è§„èŒƒ
- `ExtensionProtocol` - æ‰©å±•ç³»ç»Ÿè§„èŒƒ

### React é€‚é…å±‚ (@lcedit/react)

**èŒè´£**: å°†æ ¸å¿ƒèƒ½åŠ›é€‚é…åˆ° React ç”Ÿæ€

#### ğŸ£ æ ¸å¿ƒ Hooks

```tsx
// ç¼–è¾‘å™¨çŠ¶æ€å’Œæ“ä½œ
const { state, actions } = useEditor()

// å†å²è®°å½•
const { canUndo, canRedo, undo, redo } = useHistory()

// ç‰©æ–™ç®¡ç†
const { materials, getMaterial, searchMaterials } = useMaterials()

// å‘½ä»¤æ“ä½œ
const { execute, register, getAllCommands } = useCommands()

// æ’ä»¶ç®¡ç†
const { plugins, activate, deactivate } = usePlugins()
```

#### ğŸ”„ Context æä¾›è€…

- `ServiceProvider` - æä¾›æ ¸å¿ƒæœåŠ¡è®¿é—®
- `EditorProvider` - æä¾›ç¼–è¾‘å™¨çŠ¶æ€å’Œæ“ä½œ
- `ThemeProvider` - æä¾›ä¸»é¢˜ç®¡ç†

### UI ç»„ä»¶å±‚ (@lcedit/ui)

**èŒè´£**: æä¾›å¼€ç®±å³ç”¨çš„ UI ç»„ä»¶

#### ğŸ¨ åŸºç¡€ç»„ä»¶

- `Button` - æŒ‰é’®ï¼ˆå¤šç§æ ·å¼å’ŒçŠ¶æ€ï¼‰
- `Panel` - é¢æ¿ï¼ˆå¯æŠ˜å ã€å·¥å…·æ ï¼‰
- `Toolbar` - å·¥å…·æ ï¼ˆå¯¹é½ã€åˆ†ç»„ã€åˆ†éš”ç¬¦ï¼‰
- `PropertyPanel` - å±æ€§é¢æ¿ï¼ˆè‡ªåŠ¨é›†æˆç¼–è¾‘å™¨çŠ¶æ€ï¼‰

---

## ğŸ”Œ æ‰©å±•æŒ‡å—

### 1. åˆ›å»ºè‡ªå®šä¹‰ç‰©æ–™

```tsx
import { MaterialDefinition } from '@lcedit/core'

const MyButtonMaterial: MaterialDefinition = {
  id: 'my-button',
  name: 'æˆ‘çš„æŒ‰é’®',
  version: '1.0.0',
  
  // å±æ€§å®šä¹‰ï¼ˆJSON Schemaï¼‰
  schema: {
    type: 'object',
    properties: {
      text: { type: 'string', default: 'æŒ‰é’®' },
      color: { type: 'string', default: '#1890ff' },
      size: { 
        type: 'string', 
        enum: ['small', 'medium', 'large'],
        default: 'medium'
      }
    }
  },
  
  // å…ƒæ•°æ®
  metadata: {
    category: 'basic',
    tags: ['button', 'interactive'],
    icon: 'ğŸ”˜',
  }
}

// æ³¨å†Œç‰©æ–™
materialRegistry.register(MyButtonMaterial)
```

### 2. åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶

```tsx
import { IPlugin, PluginContext } from '@lcedit/core'

class MyPlugin implements IPlugin {
  private context!: PluginContext
  
  async activate(context: PluginContext) {
    this.context = context
    
    // æ³¨å†Œå‘½ä»¤
    context.commands.register({
      id: 'my-plugin.hello',
      execute: () => {
        console.log('Hello from plugin!')
      }
    })
    
    // ç›‘å¬äº‹ä»¶
    context.events.on('node:created', (node) => {
      console.log('Node created:', node)
    })
    
    // æ³¨å†Œç‰©æ–™
    context.materials.register({
      id: 'my-plugin.material',
      // ...
    })
  }
  
  async deactivate() {
    // æ¸…ç†èµ„æº
  }
}

// æ³¨å†Œæ’ä»¶
const plugin = new MyPlugin()
pluginManager.register({
  id: 'my-plugin',
  metadata: {
    name: 'æˆ‘çš„æ’ä»¶',
    version: '1.0.0',
  },
  activate: (ctx) => plugin.activate(ctx),
  deactivate: () => plugin.deactivate(),
})
```

### 3. æ·»åŠ çŠ¶æ€ä¸­é—´ä»¶

```tsx
import { StateMiddleware } from '@lcedit/core'

// æ—¥å¿—ä¸­é—´ä»¶
const loggerMiddleware: StateMiddleware = (prevState, nextState, action) => {
  console.log('Action:', action)
  console.log('Prev State:', prevState)
  console.log('Next State:', nextState)
  return nextState
}

// éªŒè¯ä¸­é—´ä»¶
const validationMiddleware: StateMiddleware = (prevState, nextState, action) => {
  // éªŒè¯èŠ‚ç‚¹æ•°é‡
  if (Object.keys(nextState.nodes).length > 1000) {
    console.warn('èŠ‚ç‚¹æ•°é‡è¿‡å¤šï¼')
  }
  return nextState
}

// åˆ›å»ºå¸¦ä¸­é—´ä»¶çš„çŠ¶æ€ç®¡ç†å™¨
const stateManager = createStateManager({
  middlewares: [loggerMiddleware, validationMiddleware]
})
```

### 4. ç›‘å¬äº‹ä»¶

```tsx
// ç›‘å¬èŠ‚ç‚¹åˆ›å»º
eventBus.on('node:created', (node) => {
  console.log('æ–°èŠ‚ç‚¹:', node)
})

// ç›‘å¬çŠ¶æ€å˜åŒ–ï¼ˆå¸¦ä¼˜å…ˆçº§ï¼‰
eventBus.on('state:changed', (state) => {
  console.log('çŠ¶æ€æ›´æ–°:', state)
}, { priority: 10 })

// æ‹¦æˆªäº‹ä»¶
eventBus.intercept('node:delete', (node) => {
  // é˜»æ­¢åˆ é™¤ç‰¹å®šèŠ‚ç‚¹
  if (node.locked) {
    return false // å–æ¶ˆäº‹ä»¶
  }
  return true // ç»§ç»­æ‰§è¡Œ
})
```

### 5. æ³¨å†Œå‘½ä»¤

```tsx
// æ³¨å†Œç®€å•å‘½ä»¤
commandService.registerCommand({
  id: 'editor.selectAll',
  metadata: {
    title: 'å…¨é€‰',
    category: 'edit',
    keybinding: { primary: 'Ctrl+A' }
  },
  execute: (context) => {
    // æ‰§è¡Œé€»è¾‘
  }
})

// æ³¨å†Œå¸¦éªŒè¯çš„å‘½ä»¤
commandService.registerCommand({
  id: 'editor.delete',
  metadata: {
    title: 'åˆ é™¤',
    keybinding: { primary: 'Delete' }
  },
  validate: (context) => {
    return context.selectedNodes.length > 0
  },
  execute: (context) => {
    // åˆ é™¤é€‰ä¸­èŠ‚ç‚¹
  }
})
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
LCEdit/
â”œâ”€â”€ packages/                    # Monorepo åŒ…ç›®å½•
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒå±‚
â”‚   â”‚   â”œâ”€â”€ protocols/          # åè®®å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ material/       # ç‰©æ–™åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ renderer/       # æ¸²æŸ“å™¨åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ command/        # å‘½ä»¤åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ event/          # äº‹ä»¶åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ plugin/         # æ’ä»¶åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ history/        # å†å²åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ service/        # æœåŠ¡åè®®
â”‚   â”‚   â”‚   â”œâ”€â”€ data/           # æ•°æ®åè®®
â”‚   â”‚   â”‚   â””â”€â”€ extension/      # æ‰©å±•åè®®
â”‚   â”‚   â”œâ”€â”€ services/           # æ ¸å¿ƒæœåŠ¡å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ DIContainer.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ EventBus.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ StateManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ CommandService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ MaterialRegistry.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ RendererRegistry.ts
â”‚   â”‚   â”‚   â””â”€â”€ PluginManager.ts
â”‚   â”‚   â”œâ”€â”€ types/              # å…¬å…±ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts            # ç»Ÿä¸€å¯¼å‡º
â”‚   â”‚
â”‚   â”œâ”€â”€ react/                  # React é€‚é…å±‚
â”‚   â”‚   â”œâ”€â”€ contexts/           # React Context
â”‚   â”‚   â”‚   â”œâ”€â”€ EditorContext.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ServiceContext.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ThemeContext.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/              # React Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useEditor.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useHistory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useMaterials.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useCommands.ts
â”‚   â”‚   â”‚   â””â”€â”€ usePlugins.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚
â”‚   â””â”€â”€ ui/                     # UI ç»„ä»¶å±‚
â”‚       â”œâ”€â”€ components/         # UI ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ Button.tsx
â”‚       â”‚   â”œâ”€â”€ Panel.tsx
â”‚       â”‚   â”œâ”€â”€ Toolbar.tsx
â”‚       â”‚   â””â”€â”€ PropertyPanel.tsx
â”‚       â”œâ”€â”€ styles/             # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ apps/                       # åº”ç”¨ç¤ºä¾‹
â”‚   â””â”€â”€ cvbuilder/             # CVBuilder åº”ç”¨
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ App.tsx
â”‚       â”‚   â”œâ”€â”€ pages/
â”‚       â”‚   â”œâ”€â”€ materials/
â”‚       â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”œâ”€â”€ package.json               # æ ¹ package.json
â”œâ”€â”€ pnpm-workspace.yaml        # pnpm å·¥ä½œåŒºé…ç½®
â””â”€â”€ README.md                  # æœ¬æ–‡æ¡£
```

---

## ğŸ“ æ ¸å¿ƒæ¦‚å¿µ

### åè®®é©±åŠ¨è®¾è®¡

æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½é€šè¿‡**åè®®ï¼ˆProtocolï¼‰**å®šä¹‰ï¼š

```
åè®®ï¼ˆæ¥å£å®šä¹‰ï¼‰â†’ æœåŠ¡ï¼ˆå®ç°ï¼‰â†’ é€‚é…å™¨ï¼ˆæ¡†æ¶é›†æˆï¼‰â†’ åº”ç”¨ï¼ˆä½¿ç”¨ï¼‰
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ¸…æ™°çš„è¾¹ç•Œ
- âœ… æ˜“äºæµ‹è¯•
- âœ… å¯æ›¿æ¢å®ç°
- âœ… ç‰ˆæœ¬ç®¡ç†

### äº‹ä»¶é©±åŠ¨

```tsx
// å‘å¸ƒäº‹ä»¶
eventBus.emit('node:created', newNode)

// è®¢é˜…äº‹ä»¶
eventBus.on('node:created', (node) => {
  // å¤„ç†é€»è¾‘
})

// å–æ¶ˆè®¢é˜…
const unsubscribe = eventBus.on('event', handler)
unsubscribe()
```

### ä¾èµ–æ³¨å…¥

```tsx
// æ³¨å†ŒæœåŠ¡
container.registerSingleton('logger', LoggerService)

// è§£ææœåŠ¡
const logger = container.resolve<ILogger>('logger')
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### çŠ¶æ€ç®¡ç†ä¼˜åŒ–

- **nodeMap** - O(1) èŠ‚ç‚¹æŸ¥æ‰¾
- **Immer** - ä¸å¯å˜æ•°æ®ç»“æ„
- **é€‰æ‹©å™¨** - æŒ‰éœ€è®¢é˜…
- **ä¸­é—´ä»¶** - æ€§èƒ½ç›‘æ§

### æ¸²æŸ“ä¼˜åŒ–

- **è™šæ‹ŸåŒ–** - å¤§åˆ—è¡¨æ¸²æŸ“
- **æ‡’åŠ è½½** - æŒ‰éœ€åŠ è½½ç»„ä»¶
- **Memo** - é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

---

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
pnpm test

# æµ‹è¯•è¦†ç›–ç‡
pnpm test:coverage

# ç±»å‹æ£€æŸ¥
pnpm type-check
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md)

---

## ğŸ“„ è®¸å¯è¯

[MIT License](LICENSE)

---

## ğŸŒŸ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Star â­ï¸

---

<div align="center">

**ç”¨ â¤ï¸ æ„å»º | Made with LCEdit**

[å®˜ç½‘](https://lcedit.dev) Â· [æ–‡æ¡£](https://docs.lcedit.dev) Â· [ç¤ºä¾‹](https://examples.lcedit.dev)

</div>

